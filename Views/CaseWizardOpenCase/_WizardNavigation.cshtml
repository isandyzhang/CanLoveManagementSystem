@{
    var currentStep = ViewBag.CurrentStep ?? 1;
    var caseId = ViewBag.CaseId ?? "";
    
    var steps = new List<(int StepNumber, string Title, string Description)>
    {
        (1, "個案詳細資料", "CaseDetail"),
        (2, "社會工作服務內容", "CaseSocialWorkerContent"),
        (3, "經濟狀況評估 (FQ)", "CaseFQeconomicStatus"),
        (4, "家庭身心概況 (HQ)", "CaseHQhealthStatus"),
        (5, "學業表現評估 (IQ)", "CaseIQacademicPerformance"),
        (6, "情緒評估 (EQ)", "CaseEQemotionalEvaluation"),
        (7, "最後評估表", "FinalAssessmentSummary")
    };
    
    var totalSteps = steps.Count;
    var progressPercentage = ((double)currentStep / totalSteps) * 100;
}

 

<!-- 分頁導航 -->
<div class="w-full mb-4 overflow-x-auto">
    <div class="flex gap-2 bg-slate-50 rounded-lg p-2 min-w-max">
        @foreach (var step in steps)
        {
            var isActive = currentStep == step.StepNumber;
            <a href="@Url.Action($"Step{step.StepNumber}", "CaseWizardOpenCase", new { caseId = caseId })"
               class="px-3 py-2 rounded-md text-center min-w-[88px] transition-colors @(isActive ? "bg-primary text-white font-semibold" : "text-slate-600 hover:bg-slate-100")">
                <span class="block text-xs opacity-90">步驟 @step.StepNumber</span>
                <span class="block text-sm truncate">@step.Title</span>
                <span class="hidden sm:block text-[11px] opacity-70 truncate">@step.Description</span>
            </a>
        }
    </div>
    
    <!-- 進度條 -->
    <div class="h-2 rounded-full bg-slate-200 mt-3">
        <div class="h-2 rounded-full bg-primary" style="width: @progressPercentage%"></div>
    </div>
</div>

<!-- 步驟資訊 -->
<div class="mb-4 border border-border rounded-md bg-white px-4 py-3">
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2">
        <div class="text-slate-800">
            <strong class="mr-2"><i class="bi bi-info-circle me-1"></i>目前進度：</strong>
            步驟 @currentStep / @totalSteps (@string.Format("{0:F1}", progressPercentage)%)
        </div>
        <div class="truncate">
            <small class="text-slate-500">個案編號：<code class="break-all">@caseId</code></small>
        </div>
    </div>
</div>

