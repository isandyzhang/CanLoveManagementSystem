@{
    ViewData["Title"] = "查看開案紀錄表";
    ViewData["Breadcrumbs"] = new List<(string Text, string Url)>
    {
        ("個案管理", Url.Action("Query", "CaseBasicQuery") ?? string.Empty),
        ("查詢個案", Url.Action("Query", "CaseOpeningQuery") ?? string.Empty),
        ("查看開案紀錄表", string.Empty)
    };
    
    var caseId = ViewBag.CaseId as string ?? string.Empty;
}

@if (!string.IsNullOrEmpty(caseId))
{
    <script>
        // 直接導向 Step1（只讀模式）
        window.location.href = '@Url.Action("View", "CaseOpeningQuery", new { caseId = caseId, step = "CaseDetail" })';
    </script>
}
else
{
    <div class="w-full px-4 sm:px-6 lg:px-8">
        <div class="max-w-[1400px] mx-auto">
            <div class="card bg-white dark:bg-slate-900 rounded-xl shadow-card-lg border border-[#FDBA74] dark:border-slate-800">
                <div class="px-6 py-6">
                    <div class="text-center">
                        <p class="text-slate-600 dark:text-slate-400">找不到指定的開案記錄</p>
                        <a href="@Url.Action("Query", "CaseOpeningQuery")" class="btn btn--secondary mt-4">
                            <i class="bi bi-arrow-left me-1"></i>返回查詢列表
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


