@model CanLove_Backend.Domain.Case.ViewModels.Opening.CaseWizard_S2_CSWC_ViewModel

<!-- 家系圖與居住地 -->
<div class="row mb-4">
    <div class="col-12">
        <h6 class="text-primary border-b border-border pb-2 mb-3">
            <i class="fas fa-sitemap me-2"></i>家系圖與居住地
        </h6>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label class="block text-lg font-medium mb-2 text-slate-900">家系圖圖片 <small class="block text-slate-500">family_tree_img（可空，存 blobId）</small></label>
            <input type="hidden" asp-for="FamilyTreeImg" id="familyTreeBlobId" />
            <div id="familyTreeDrop" class="w-full border-2 border-dashed border-slate-300 rounded-lg bg-slate-50 p-4 text-center cursor-pointer">
                <div class="mb-2">
                    <img id="familyTreePreview" src="" alt="預覽" class="mx-auto max-h-48 rounded hidden" />
                </div>
                <div class="text-slate-500 text-sm">
                    點擊或拖放圖片到此，或直接貼上圖片
                </div>
                <div class="text-slate-400 text-xs mt-1">支援 JPG/PNG/GIF，最大 10MB</div>
                <input type="file" id="familyTreeFile" accept="image/jpeg,image/png,image/gif" class="hidden" />
            </div>
            <div class="text-slate-500 text-xs mt-1" id="familyTreeStatus"></div>
            <span asp-validation-for="FamilyTreeImg" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="ResidenceTypeValueId" class="block text-lg font-medium mb-2 text-slate-900">居住地型態 <small class="block text-slate-500">residence_type_value_id（可空，外鍵 OptionSetValues.value_id）</small></label>
            <select asp-for="ResidenceTypeValueId" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇居住地型態</option>
                @if (Model.ResidenceTypeOptions != null)
                {
                    @foreach (var option in Model.ResidenceTypeOptions)
                    {
                        <option value="@option.OptionValueId">@option.ValueName</option>
                    }
                }
            </select>
            <span asp-validation-for="ResidenceTypeValueId" class="text-red-600 text-sm"></span>
        </div>
    </div>
</div>

<!-- 居家環境評估 -->
<div class="row mb-4">
    <div class="col-12">
        <h6 class="text-primary border-b border-border pb-2 mb-3">
            <i class="fas fa-home me-2"></i>居家環境評估
        </h6>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label asp-for="HouseCleanlinessRating" class="block text-lg font-medium mb-2 text-slate-900">居家整潔分數 <small class="block text-slate-500">house_cleanliness_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="HouseCleanlinessRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常不整潔</option>
                <option value="2">2分 - 不整潔</option>
                <option value="3">3分 - 整潔</option>
                <option value="4">4分 - 非常整潔</option>
            </select>
            <span asp-validation-for="HouseCleanlinessRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="HouseCleanlinessNote" class="block text-lg font-medium mb-2 text-slate-900">居家整潔說明 <small class="block text-slate-500">house_cleanliness_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="HouseCleanlinessNote" class="input" placeholder="請輸入居家整潔說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="HouseCleanlinessNote" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="HouseSafetyRating" class="block text-lg font-medium mb-2 text-slate-900">居家安全分數 <small class="block text-slate-500">house_safety_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="HouseSafetyRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常不安全</option>
                <option value="2">2分 - 不安全</option>
                <option value="3">3分 - 安全</option>
                <option value="4">4分 - 非常安全</option>
            </select>
            <span asp-validation-for="HouseSafetyRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="HouseSafetyNote" class="block text-lg font-medium mb-2 text-slate-900">居家安全說明 <small class="block text-slate-500">house_safety_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="HouseSafetyNote" class="input" placeholder="請輸入居家安全說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="HouseSafetyNote" class="text-red-600 text-sm"></span>
        </div>
    </div>
</div>

<!-- 互動關係評估 -->
<div class="row mb-4">
    <div class="col-12">
        <h6 class="text-primary border-b border-border pb-2 mb-3">
            <i class="fas fa-heart me-2"></i>互動關係評估
        </h6>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label asp-for="CaregiverChildInteractionRating" class="block text-lg font-medium mb-2 text-slate-900">照顧者與兒少互動情形分數 <small class="block text-slate-500">caregiver_child_interaction_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="CaregiverChildInteractionRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常不好</option>
                <option value="2">2分 - 不好</option>
                <option value="3">3分 - 好</option>
                <option value="4">4分 - 非常好</option>
            </select>
            <span asp-validation-for="CaregiverChildInteractionRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="CaregiverChildInteractionNote" class="block text-lg font-medium mb-2 text-slate-900">照顧者與兒少互動情形說明 <small class="block text-slate-500">caregiver_child_interaction_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="CaregiverChildInteractionNote" class="input" placeholder="請輸入互動情形說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="CaregiverChildInteractionNote" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="CaregiverFamilyInteractionRating" class="block text-lg font-medium mb-2 text-slate-900">照顧者與整體同住家人互動情形分數 <small class="block text-slate-500">caregiver_family_interaction_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="CaregiverFamilyInteractionRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常不好</option>
                <option value="2">2分 - 不好</option>
                <option value="3">3分 - 好</option>
                <option value="4">4分 - 非常好</option>
            </select>
            <span asp-validation-for="CaregiverFamilyInteractionRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="CaregiverFamilyInteractionNote" class="block text-lg font-medium mb-2 text-slate-900">照顧者與整體同住家人互動情形說明 <small class="block text-slate-500">caregiver_family_interaction_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="CaregiverFamilyInteractionNote" class="input" placeholder="請輸入互動情形說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="CaregiverFamilyInteractionNote" class="text-red-600 text-sm"></span>
        </div>
    </div>
</div>

<!-- 資源與支持評估 -->
<div class="row mb-4">
    <div class="col-12">
        <h6 class="text-primary border-b border-border pb-2 mb-3">
            <i class="fas fa-handshake me-2"></i>資源與支持評估
        </h6>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label asp-for="FamilyResourceAbilityRating" class="block text-lg font-medium mb-2 text-slate-900">家庭資源連結能力分數 <small class="block text-slate-500">family_resource_ability_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="FamilyResourceAbilityRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常差</option>
                <option value="2">2分 - 差</option>
                <option value="3">3分 - 好</option>
                <option value="4">4分 - 非常好</option>
            </select>
            <span asp-validation-for="FamilyResourceAbilityRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="FamilyResourceAbilityNote" class="block text-lg font-medium mb-2 text-slate-900">家庭資源連結能力說明 <small class="block text-slate-500">family_resource_ability_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="FamilyResourceAbilityNote" class="input" placeholder="請輸入資源連結能力說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="FamilyResourceAbilityNote" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="FamilySocialSupportRating" class="block text-lg font-medium mb-2 text-slate-900">社會家庭支持獲得分數 <small class="block text-slate-500">family_social_support_rating（可空，TINYINT 1-4）</small></label>
            <select asp-for="FamilySocialSupportRating" class="input" form-mode="@Model.Mode" disabled-when="ReadOnly">
                <option value="">請選擇分數</option>
                <option value="1">1分 - 非常少</option>
                <option value="2">2分 - 少</option>
                <option value="3">3分 - 多</option>
                <option value="4">4分 - 非常多</option>
            </select>
            <span asp-validation-for="FamilySocialSupportRating" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="FamilySocialSupportNote" class="block text-lg font-medium mb-2 text-slate-900">社會家庭支持獲得說明 <small class="block text-slate-500">family_social_support_note（可空，NVARCHAR(50)）</small></label>
            <input asp-for="FamilySocialSupportNote" class="input" placeholder="請輸入社會支持說明" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="FamilySocialSupportNote" class="text-red-600 text-sm"></span>
        </div>
    </div>
</div>

<!-- 特殊情形 -->
<div class="row mb-4">
    <div class="col-12">
        <h6 class="text-primary border-b border-border pb-2 mb-3">
            <i class="fas fa-exclamation-triangle me-2"></i>特殊情形
        </h6>
    </div>
    <div class="col-12">
        <div class="mb-3">
            <label asp-for="SpecialCircumstancesDescription" class="block text-lg font-medium mb-2 text-slate-900">其他特殊情形描述 <small class="block text-slate-500">special_circumstances_description（可空，NVARCHAR(50)）</small></label>
            <input asp-for="SpecialCircumstancesDescription" class="input" placeholder="請描述其他特殊情形" form-mode="@Model.Mode" readonly-when="ReadOnly" />
            <span asp-validation-for="SpecialCircumstancesDescription" class="text-red-600 text-sm"></span>
        </div>
    </div>
</div>

