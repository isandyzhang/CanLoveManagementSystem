@model IEnumerable<CanLove_Backend.Domain.Case.Models.Basic.Case>
@{
    ViewData["Title"] = "個案審核 - 個案基本資料";
    var modelCount = Model?.Count() ?? 0;
    
    // 自訂麵包屑：個案管理 > 個案審核
    ViewData["Breadcrumbs"] = new List<(string Text, string Url)>
    {
        ("個案管理", Url.Action("Query", "CaseBasic") ?? string.Empty),
        ("個案審核", Url.Action("Review", "CaseBasic") ?? string.Empty)
    };
}

<div class="w-full px-4 sm:px-6 lg:px-8">
    <div class="max-w-[1400px] mx-auto">
        @{ ViewBag.CurrentPage = "Review"; ViewBag.CurrentTab = "CaseBasic"; }
        <partial name="~/Views/Shared/Partials/_CaseFormTabs.cshtml" />
        
        <div class="mb-2 text-sm text-slate-600 dark:text-slate-400">共找到 @modelCount 筆待審項目</div>

        @{
            if (TempData["SuccessMessage"] != null || TempData["ErrorMessage"] != null || TempData["WarningMessage"] != null || TempData["InfoMessage"] != null)
            {
                <partial name="~/Views/Shared/Partials/_AlertMessage.cshtml" />
            }
        }

        <!-- 資料列表（使用公版 _CaseListTable） -->
        @{
            ViewBag.TableMode = "Review";
            ViewBag.ShowActions = false;
            ViewBag.OnRowClick = "viewCaseDetails";
        }
        <partial name="~/Views/Case/Basic/Partials/_CaseListTable.cshtml" model="Model" />
    </div>
</div>

@section Scripts {
    <script>
        // 查看個案詳細資料（導向 ReviewItem）
        function viewCaseDetails(caseId) {
            if (caseId) {
                window.location.href = '@Url.Action("ReviewItem", "CaseBasic")?id=' + encodeURIComponent(caseId);
            }
        }
    </script>
}


